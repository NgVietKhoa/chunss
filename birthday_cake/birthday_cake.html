<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Birthday Celebration - Revamped</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for space icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts for elegant text -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Pacifico&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary-pink: #FFC0CB;
            /* Pastel Pink */
            --light-pink: #FFB6C1;
            /* Lighter Pink */
            --cream-white: #FDF5E6;
            /* Vanilla Cream */
            --dark-bg-start: #0A0B1A;
            /* Darker blue-black */
            --dark-bg-end: #020308;
            /* Even darker */
            --flame-color: #FFA500;
            /* Orange */
            --music-control-bg: rgba(15, 15, 25, 0.9);
            /* Darker, more subtle */

            /* Enhanced Star Colors for Galaxy */
            --star-color-1: #FFF;
            --star-color-2: #E0F2F7;
            /* Light blue */
            --star-color-3: #FFFAF0;
            /* Floral White */
            --star-color-4: #FFD700;
            /* Gold */
            --star-color-5: #FF69B4;
            /* Hot Pink */
            --star-color-6: #00FFFF;
            /* Cyan */
            --star-color-7: #98FB98;
            /* Pale Green */
            --star-color-8: #BA55D3;
            /* Medium Orchid */

            /* New 3D Carousel Colors */
            --carousel-border-color: rgba(255, 255, 255, 0.3);
            /* Slightly more visible */
            --carousel-glow-color: rgba(173, 216, 230, 0.8);
            /* Stronger glow */
            --carousel-bg-color: rgba(0, 0, 0, 0.4);
            /* Slightly darker */

            /* Gift Box Colors */
            --gift-box-color: #C0392B;
            /* Red */
            --gift-ribbon-color: #F1C40F;
            /* Gold */
            --gift-shadow-color: rgba(0, 0, 0, 0.5);

            /* New Gift Box Colors */
            --gift-box-color-2: #27AE60;
            /* Green */
            --gift-ribbon-color-2: #F39C12;
            /* Orange */
            --gift-box-color-3: #8E44AD;
            /* Purple */
            --gift-ribbon-color-3: #ECF0F1;
            /* Light Gray */

            --small-gift-box-color-1: #E74C3C;
            /* Red */
            --small-gift-ribbon-color-1: #F1C40F;
            /* Gold */
            --small-gift-box-color-2: #3498DB;
            /* Blue */
            --small-gift-ribbon-color-2: #ECF0F1;
            /* Light Gray */
            --small-gift-box-color-3: #1ABC9C;
            /* Turquoise */
            --small-gift-ribbon-color-3: #F39C12;
            /* Orange */
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            /* overflow: hidden; */
            /* Ngăn chặn nhảy scroll - Đã thay đổi */
            overflow-y: scroll;
            /* Luôn hiển thị thanh cuộn dọc để tránh nhảy giao diện */
            background: radial-gradient(ellipse at bottom, var(--dark-bg-start) 0%, var(--dark-bg-end) 100%);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1500px;
            /* Increased perspective for more depth */
            position: relative;
            cursor: default;
            color: white;
        }

        /* Khi overlay mở, ẩn thanh cuộn */
        body.no-scroll {
            overflow: hidden;
        }

        /* Stars background - Enhanced for Galaxy Effect */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            display: block;
            background: transparent;
            z-index: 0;
        }

        .stars-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
        }

        .stars-small,
        .stars-medium,
        .stars-large,
        .stars-twinkling,
        .stars-extra-small,
        .stars-extra-large {
            background: var(--star-color-1);
            box-shadow:
                0 0 2px var(--star-color-1), 0 0 4px var(--star-color-2), 0 0 6px var(--star-color-3),
                0 0 8px var(--star-color-4), 0 0 10px var(--star-color-5);
            animation: animateStars 100s linear infinite;
        }

        /* Increased density and varied colors for stars */
        /* Tăng số lượng sao bằng cách thêm nhiều giá trị vào box-shadow */
        .stars-extra-small {
            width: 0.5px;
            height: 0.5px;
            animation-duration: 80s;
            box-shadow:
                /* Thêm nhiều sao hơn */
                10px 10px var(--star-color-1), 100px 20px var(--star-color-2), 200px 30px var(--star-color-3), 300px 40px var(--star-color-4), 400px 50px var(--star-color-5),
                500px 60px var(--star-color-6), 600px 70px var(--star-color-7), 700px 80px var(--star-color-8), 800px 90px var(--star-color-1), 900px 100px var(--star-color-2),
                150px 150px var(--star-color-3), 250px 250px var(--star-color-4), 350px 350px var(--star-color-5), 450px 450px var(--star-color-6), 550px 550px var(--star-color-7),
                650px 650px var(--star-color-8), 750px 750px var(--star-color-1), 850px 850px var(--star-color-2), 950px 950px var(--star-color-3), 50px 900px var(--star-color-4),
                900px 50px var(--star-color-5), 10px 990px var(--star-color-6), 990px 10px var(--star-color-7), 400px 10px var(--star-color-8), 10px 400px var(--star-color-1),
                600px 990px var(--star-color-2), 990px 600px var(--star-color-3), 20px 200px var(--star-color-4), 200px 20px var(--star-color-5), 800px 80px var(--star-color-6),
                80px 800px var(--star-color-7), 120px 300px var(--star-color-8), 300px 120px var(--star-color-1), 700px 400px var(--star-color-2), 400px 700px var(--star-color-3),
                50px 50px var(--star-color-4), 950px 950px var(--star-color-5), 10px 50px var(--star-color-6), 50px 10px var(--star-color-7), 900px 990px var(--star-color-8),
                990px 900px var(--star-color-1), 30px 30px var(--star-color-2), 970px 970px var(--star-color-3), 10px 970px var(--star-color-4), 970px 10px var(--star-color-5),
                500px 500px var(--star-color-6), 100px 500px var(--star-color-7), 500px 100px var(--star-color-8), 900px 500px var(--star-color-1), 500px 900px var(--star-color-2),
                /* Thêm nhiều sao hơn nữa */
                10px 10px var(--star-color-1), 100px 20px var(--star-color-2), 200px 30px var(--star-color-3), 300px 40px var(--star-color-4), 400px 50px var(--star-color-5),
                500px 60px var(--star-color-6), 600px 70px var(--star-color-7), 700px 80px var(--star-color-8), 800px 90px var(--star-color-1), 900px 100px var(--star-color-2),
                150px 150px var(--star-color-3), 250px 250px var(--star-color-4), 350px 350px var(--star-color-5), 450px 450px var(--star-color-6), 550px 550px var(--star-color-7),
                650px 650px var(--star-color-8), 750px 750px var(--star-color-1), 850px 850px var(--star-color-2), 950px 950px var(--star-color-3), 50px 900px var(--star-color-4),
                900px 50px var(--star-color-5), 10px 990px var(--star-color-6), 990px 10px var(--star-color-7), 400px 10px var(--star-color-8), 10px 400px var(--star-color-1),
                600px 990px var(--star-color-2), 990px 600px var(--star-color-3), 20px 200px var(--star-color-4), 200px 20px var(--star-color-5), 800px 80px var(--star-color-6),
                80px 800px var(--star-color-7), 120px 300px var(--star-color-8), 300px 120px var(--star-color-1), 700px 400px var(--star-color-2), 400px 700px var(--star-color-3),
                50px 50px var(--star-color-4), 950px 950px var(--star-color-5), 10px 50px var(--star-color-6), 50px 10px var(--star-color-7), 900px 990px var(--star-color-8),
                990px 900px var(--star-color-1), 30px 30px var(--star-color-2), 970px 970px var(--star-color-3), 10px 970px var(--star-color-4), 970px 10px var(--star-color-5),
                500px 500px var(--star-color-6), 100px 500px var(--star-color-7), 500px 100px var(--star-color-8), 900px 500px var(--star-color-1), 500px 900px var(--star-color-2);
            animation: animateStars 80s linear infinite;
        }

        .stars-small {
            width: 1px;
            height: 1px;
            box-shadow:
                /* Thêm nhiều sao hơn */
                200px 100px var(--star-color-1), 400px 300px var(--star-color-2), 600px 500px var(--star-color-3), 800px 700px var(--star-color-4), 100px 900px var(--star-color-5),
                300px 200px var(--star-color-6), 500px 400px var(--star-color-7), 700px 600px var(--star-color-8), 900px 800px var(--star-color-1), 50px 50px var(--star-color-2),
                150px 950px var(--star-color-3), 250px 50px var(--star-color-4), 350px 850px var(--star-color-5), 450px 150px var(--star-color-6), 550px 750px var(--star-color-7),
                650px 250px var(--star-color-8), 750px 650px var(--star-color-1), 850px 350px var(--star-color-2), 950px 550px var(--star-color-3), 10px 10px var(--star-color-4),
                110px 110px var(--star-color-5), 210px 210px var(--star-color-6), 310px 310px var(--star-color-7), 410px 410px var(--star-color-8), 510px 510px var(--star-color-1),
                610px 610px var(--star-color-2), 710px 710px var(--star-color-3), 810px 810px var(--star-color-4), 910px 910px var(--star-color-5), 60px 10px var(--star-color-6),
                160px 110px var(--star-color-7), 260px 210px var(--star-color-8), 360px 310px var(--star-color-1), 460px 410px var(--star-color-2), 560px 510px var(--star-color-3),
                660px 610px var(--star-color-4), 760px 710px var(--star-color-5), 860px 810px var(--star-color-6), 960px 910px var(--star-color-7), 20px 80px var(--star-color-8),
                120px 180px var(--star-color-1), 220px 280px var(--star-color-2), 320px 380px var(--star-color-3), 420px 480px var(--star-color-4), 520px 580px var(--star-color-5),
                620px 680px var(--star-color-6), 720px 780px var(--star-color-7), 820px 880px var(--star-color-8), 920px 980px var(--star-color-1), 70px 30px var(--star-color-2),
                170px 130px var(--star-color-3), 270px 230px var(--star-color-4), 370px 330px var(--star-color-5), 470px 430px var(--star-color-6), 570px 530px var(--star-color-7),
                670px 630px var(--star-color-8), 770px 730px var(--star-color-1), 870px 830px var(--star-color-2), 970px 930px var(--star-color-3),
                10px 500px var(--star-color-4), 990px 10px var(--star-color-5), 500px 990px var(--star-color-6),
                /* Thêm nhiều sao hơn nữa */
                200px 100px var(--star-color-1), 400px 300px var(--star-color-2), 600px 500px var(--star-color-3), 800px 700px var(--star-color-4), 100px 900px var(--star-color-5),
                300px 200px var(--star-color-6), 500px 400px var(--star-color-7), 700px 600px var(--star-color-8), 900px 800px var(--star-color-1), 50px 50px var(--star-color-2),
                150px 950px var(--star-color-3), 250px 50px var(--star-color-4), 350px 850px var(--star-color-5), 450px 150px var(--star-color-6), 550px 750px var(--star-color-7),
                650px 250px var(--star-color-8), 750px 650px var(--star-color-1), 850px 350px var(--star-color-2), 950px 550px var(--star-color-3), 10px 10px var(--star-color-4),
                110px 110px var(--star-color-5), 210px 210px var(--star-color-6), 310px 310px var(--star-color-7), 410px 410px var(--star-color-8), 510px 510px var(--star-color-1),
                610px 610px var(--star-color-2), 710px 710px var(--star-color-3), 810px 810px var(--star-color-4), 910px 910px var(--star-color-5), 60px 10px var(--star-color-6),
                160px 110px var(--star-color-7), 260px 210px var(--star-color-8), 360px 310px var(--star-color-1), 460px 410px var(--star-color-2), 560px 510px var(--star-color-3),
                660px 610px var(--star-color-4), 760px 710px var(--star-color-5), 860px 810px var(--star-color-6), 960px 910px var(--star-color-7), 20px 80px var(--star-color-8),
                120px 180px var(--star-color-1), 220px 280px var(--star-color-2), 320px 380px var(--star-color-3), 420px 480px var(--star-color-4), 520px 580px var(--star-color-5),
                620px 680px var(--star-color-6), 720px 780px var(--star-color-7), 820px 880px var(--star-color-8), 920px 980px var(--star-color-1), 70px 30px var(--star-color-2),
                170px 130px var(--star-color-3), 270px 230px var(--star-color-4), 370px 330px var(--star-color-5), 470px 430px var(--star-color-6), 570px 530px var(--star-color-7),
                670px 630px var(--star-color-8), 770px 730px var(--star-color-1), 870px 830px var(--star-color-2), 970px 930px var(--star-color-3),
                10px 500px var(--star-color-4), 990px 10px var(--star-color-5), 500px 990px var(--star-color-6);
        }

        .stars-medium {
            width: 2px;
            height: 2px;
            animation-duration: 150s;
            box-shadow:
                /* Thêm nhiều sao hơn */
                150px 50px var(--star-color-1), 350px 250px var(--star-color-2), 550px 450px var(--star-color-3), 750px 650px var(--star-color-4), 950px 850px var(--star-color-5),
                50px 150px var(--star-color-6), 250px 350px var(--star-color-7), 450px 550px var(--star-color-8), 650px 750px var(--star-color-1), 850px 950px var(--star-color-2),
                100px 100px var(--star-color-3), 200px 200px var(--star-color-4), 300px 300px var(--star-color-5), 400px 400px var(--star-color-6), 500px 500px var(--star-color-7),
                600px 600px var(--star-color-8), 700px 700px var(--star-color-1), 800px 800px var(--star-color-2), 900px 900px var(--star-color-3), 120px 30px var(--star-color-4),
                220px 130px var(--star-color-5), 320px 230px var(--star-color-6), 420px 330px var(--star-color-7), 520px 430px var(--star-color-8), 620px 530px var(--star-color-1),
                720px 630px var(--star-color-2), 820px 730px var(--star-color-3), 920px 830px var(--star-color-4), 980px 930px var(--star-color-5),
                200px 10px var(--star-color-6), 800px 900px var(--star-color-7), 10px 800px var(--star-color-8),
                /* Thêm nhiều sao hơn nữa */
                150px 50px var(--star-color-1), 350px 250px var(--star-color-2), 550px 450px var(--star-color-3), 750px 650px var(--star-color-4), 950px 850px var(--star-color-5),
                50px 150px var(--star-color-6), 250px 350px var(--star-color-7), 450px 550px var(--star-color-8), 650px 750px var(--star-color-1), 850px 950px var(--star-color-2),
                100px 100px var(--star-color-3), 200px 200px var(--star-color-4), 300px 300px var(--star-color-5), 400px 400px var(--star-color-6), 500px 500px var(--star-color-7),
                600px 600px var(--star-color-8), 700px 700px var(--star-color-1), 800px 800px var(--star-color-2), 900px 900px var(--star-color-3), 120px 30px var(--star-color-4),
                220px 130px var(--star-color-5), 320px 230px var(--star-color-6), 420px 330px var(--star-color-7), 520px 430px var(--star-color-8), 620px 530px var(--star-color-1),
                720px 630px var(--star-color-2), 820px 730px var(--star-color-3), 920px 830px var(--star-color-4), 980px 930px var(--star-color-5),
                200px 10px var(--star-color-6), 800px 900px var(--star-color-7), 10px 800px var(--star-color-8);
        }

        .stars-large {
            width: 3px;
            height: 3px;
            animation-duration: 200s;
            box-shadow:
                /* Thêm nhiều sao hơn */
                100px 200px var(--star-color-1), 300px 400px var(--star-color-2), 500px 600px var(--star-color-3), 700px 800px var(--star-color-4), 900px 100px var(--star-color-5),
                200px 300px var(--star-color-6), 400px 500px var(--star-color-7), 600px 700px var(--star-color-8), 800px 900px var(--star-color-1), 20px 20px var(--star-color-2),
                120px 920px var(--star-color-3), 220px 20px var(--star-color-4), 320px 820px var(--star-color-5), 420px 120px var(--star-color-6), 520px 720px var(--star-color-7),
                620px 220px var(--star-color-8), 720px 620px var(--star-color-1), 820px 320px var(--star-color-2), 920px 520px var(--star-color-3), 30px 30px var(--star-color-4),
                130px 130px var(--star-color-5), 230px 230px var(--star-color-6), 330px 330px var(--star-color-7), 430px 430px var(--star-color-8), 530px 530px var(--star-color-1),
                630px 630px var(--star-color-2), 730px 730px var(--star-color-3), 830px 830px var(--star-color-4), 930px 930px var(--star-color-5), 80px 30px var(--star-color-6),
                180px 130px var(--star-color-7), 280px 230px var(--star-color-8), 380px 330px var(--star-color-1), 480px 430px var(--star-color-2), 580px 530px var(--star-color-3),
                680px 630px var(--star-color-4), 780px 730px var(--star-color-5), 880px 830px var(--star-color-6), 980px 930px var(--star-color-7),
                50px 900px var(--star-color-8), 950px 50px var(--star-color-1), 700px 200px var(--star-color-2),
                /* Thêm nhiều sao hơn nữa */
                100px 200px var(--star-color-1), 300px 400px var(--star-color-2), 500px 600px var(--star-color-3), 700px 800px var(--star-color-4), 900px 100px var(--star-color-5),
                200px 300px var(--star-color-6), 400px 500px var(--star-color-7), 600px 700px var(--star-color-8), 800px 900px var(--star-color-1), 20px 20px var(--star-color-2),
                120px 920px var(--star-color-3), 220px 20px var(--star-color-4), 320px 820px var(--star-color-5), 420px 120px var(--star-color-6), 520px 720px var(--star-color-7),
                620px 220px var(--star-color-8), 720px 620px var(--star-color-1), 820px 320px var(--star-color-2), 920px 520px var(--star-color-3), 30px 30px var(--star-color-4),
                130px 130px var(--star-color-5), 230px 230px var(--star-color-6), 330px 330px var(--star-color-7), 430px 430px var(--star-color-8), 530px 530px var(--star-color-1),
                630px 630px var(--star-color-2), 730px 730px var(--star-color-3), 830px 830px var(--star-color-4), 930px 930px var(--star-color-5), 80px 30px var(--star-color-6),
                180px 130px var(--star-color-7), 280px 230px var(--star-color-8), 380px 330px var(--star-color-1), 480px 430px var(--star-color-2), 580px 530px var(--star-color-3),
                680px 630px var(--star-color-4), 780px 730px var(--star-color-5), 880px 830px var(--star-color-6), 980px 930px var(--star-color-7),
                50px 900px var(--star-color-8), 950px 50px var(--star-color-1), 700px 200px var(--star-color-2);
        }

        .stars-extra-large {
            width: 4px;
            height: 4px;
            animation-duration: 250s;
            box-shadow:
                /* Thêm nhiều sao hơn */
                50px 50px var(--star-color-1), 150px 250px var(--star-color-2), 250px 450px var(--star-color-3), 350px 650px var(--star-color-4), 450px 850px var(--star-color-5),
                550px 100px var(--star-color-6), 650px 300px var(--star-color-7), 750px 500px var(--star-color-8), 850px 700px var(--star-color-1), 950px 900px var(--star-color-2),
                10px 10px var(--star-color-3), 990px 990px var(--star-color-4), 10px 990px var(--star-color-5), 990px 10px var(--star-color-6), 500px 10px var(--star-color-7),
                10px 500px var(--star-color-8), 990px 500px var(--star-color-1), 500px 990px var(--star-color-2), 200px 200px var(--star-color-3), 800px 800px var(--star-color-4),
                200px 800px var(--star-color-5), 800px 200px var(--star-color-6), 300px 300px var(--star-color-7), 700px 700px var(--star-color-8), 300px 700px var(--star-color-1),
                700px 300px var(--star-color-2),
                /* Thêm nhiều sao hơn nữa */
                50px 50px var(--star-color-1), 150px 250px var(--star-color-2), 250px 450px var(--star-color-3), 350px 650px var(--star-color-4), 450px 850px var(--star-color-5),
                550px 100px var(--star-color-6), 650px 300px var(--star-color-7), 750px 500px var(--star-color-8), 850px 700px var(--star-color-1), 950px 900px var(--star-color-2),
                10px 10px var(--star-color-3), 990px 990px var(--star-color-4), 10px 990px var(--star-color-5), 990px 10px var(--star-color-6), 500px 10px var(--star-color-7),
                10px 500px var(--star-color-8), 990px 500px var(--star-color-1), 500px 990px var(--star-color-2), 200px 200px var(--star-color-3), 800px 800px var(--star-color-4),
                200px 800px var(--star-color-5), 800px 200px var(--star-color-6), 300px 300px var(--star-color-7), 700px 700px var(--star-color-8), 300px 700px var(--star-color-1),
                700px 300px var(--star-color-2);
            animation: animateStars 250s linear infinite;
            /* Xóa 'twinkle' animation */
        }


        .stars-twinkling {
            width: 1.5px;
            height: 1.5px;
            animation-duration: 120s;
            box-shadow:
                /* Thêm nhiều sao hơn */
                50px 100px var(--star-color-1), 250px 300px var(--star-color-2), 450px 500px var(--star-color-3), 650px 700px var(--star-color-4), 850px 900px var(--star-color-5),
                150px 200px var(--star-color-6), 350px 400px var(--star-color-7), 550px 600px var(--star-color-8), 750px 800px var(--star-color-1), 950px 100px var(--star-color-2),
                70px 70px var(--star-color-3), 170px 170px var(--star-color-4), 270px 270px var(--star-color-5), 370px 370px var(--star-color-6), 470px 470px var(--star-color-7),
                570px 570px var(--star-color-8), 670px 670px var(--star-color-1), 770px 770px var(--star-color-2), 870px 870px var(--star-color-3), 970px 970px var(--star-color-4),
                300px 700px var(--star-color-5), 700px 300px var(--star-color-6), 100px 10px var(--star-color-7),
                /* Thêm nhiều sao hơn nữa */
                50px 100px var(--star-color-1), 250px 300px var(--star-color-2), 450px 500px var(--star-color-3), 650px 700px var(--star-color-4), 850px 900px var(--star-color-5),
                150px 200px var(--star-color-6), 350px 400px var(--star-color-7), 550px 600px var(--star-color-8), 750px 800px var(--star-color-1), 950px 100px var(--star-color-2),
                70px 70px var(--star-color-3), 170px 170px var(--star-color-4), 270px 270px var(--star-color-5), 370px 370px var(--star-color-6), 470px 470px var(--star-color-7),
                570px 570px var(--star-color-8), 670px 670px var(--star-color-1), 770px 770px var(--star-color-2), 870px 870px var(--star-color-3), 970px 970px var(--star-color-4),
                300px 700px var(--star-color-5), 700px 300px var(--star-color-6), 100px 10px var(--star-color-7);
            animation: animateStars 120s linear infinite;
        }

        @keyframes animateStars {
            from {
                transform: translateY(0);
            }

            to {
                transform: translateY(-2000px);
                /* Tăng khoảng cách di chuyển để tạo cảm giác sâu hơn */
            }
        }

        /* Xóa toàn bộ keyframes twinkle */
        /* @keyframes twinkle {
            0%,
            100% {
                opacity: 0.5;
                transform: scale(1);
                filter: brightness(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.3);
                filter: brightness(1.5);
            }
        } */

        /* Shooting Star */
        .shooting-star-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        .shooting-star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.8) 50%, rgba(255, 255, 255, 0) 100%);
            border-radius: 50%;
            box-shadow: 0 0 15px 8px rgba(255, 255, 255, 0.6), 0 0 30px 15px rgba(173, 216, 230, 0.4);
            animation: shoot 3s linear forwards;
            opacity: 0;
        }

        @keyframes shoot {
            0% {
                transform: translate(0, 0) rotate(45deg);
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            100% {
                transform: translate(500px, 500px) rotate(45deg);
                opacity: 0;
            }
        }

        /* Space Icons */
        .space-icon {
            position: absolute;
            color: #fff;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.7), 0 0 25px rgba(173, 216, 230, 0.5);
            z-index: 1;
            animation: floatIcon 25s ease-in-out infinite alternate;
        }

        .space-icon.fa-moon {
            font-size: 70px;
            top: 10%;
            left: 15%;
            color: #f1c40f;
            animation-delay: 0s;
            --initial-rotation: 0deg;
        }

        .space-icon.fa-rocket {
            font-size: 60px;
            top: 70%;
            left: 80%;
            color: #e74c3c;
            animation-delay: 5s;
            transform: rotate(45deg);
            --initial-rotation: 45deg;
        }

        .space-icon.fa-satellite {
            font-size: 80px;
            top: 20%;
            left: 70%;
            color: #9b59b6;
            animation-delay: 10s;
            --initial-rotation: 0deg;
        }

        .space-icon.fa-meteor {
            font-size: 50px;
            top: 50%;
            left: 5%;
            color: #3498db;
            animation-delay: 15s;
            transform: rotate(-30deg);
            --initial-rotation: -30deg;
        }

        .space-icon.fa-user-astronaut {
            font-size: 90px;
            top: 85%;
            left: 25%;
            color: #ecf0f1;
            animation-delay: 20s;
            --initial-rotation: 0deg;
        }

        .space-icon.fa-globe-americas {
            font-size: 100px;
            top: 30%;
            left: 10%;
            color: #2ecc71;
            animation-delay: 25s;
            --initial-rotation: 0deg;
        }

        .space-icon.fa-star-half-alt {
            font-size: 55px;
            top: 60%;
            left: 90%;
            color: #f39c12;
            animation-delay: 30s;
            --initial-rotation: 0deg;
        }


        @keyframes floatIcon {
            0% {
                transform: translate(0, 0) rotate(var(--initial-rotation, 0deg));
            }

            50% {
                transform: translate(25px, 35px) rotate(var(--initial-rotation, 0deg));
            }

            100% {
                transform: translate(0, 0) rotate(var(--initial-rotation, 0deg));
            }
        }

        /* Mouse trail stars */
        .mouse-star {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            opacity: 0;
            animation: fadeOutStar 1.2s forwards cubic-bezier(0.25, 0.46, 0.45, 0.94);
            pointer-events: none;
            z-index: 9999;
            transform: scale(0);
        }

        @keyframes fadeOutStar {
            0% {
                transform: scale(0.2);
                opacity: 1;
            }

            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }

            100% {
                transform: scale(1.8);
                opacity: 0;
            }
        }

        /* New 3D Carousel Design */
        .scene {
            position: relative;
            width: 100vw;
            height: 100vh;
            transform-style: preserve-3d;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }

        .carousel-container {
            position: absolute;
            width: 100vw;
            height: 100vh;
            transform-style: preserve-3d;
            transform: rotateX(-15deg) rotateY(0deg);
            animation: rotateScene 60s infinite linear;
            overflow: visible;
        }

        @keyframes rotateScene {
            from {
                transform: rotateX(-15deg) rotateY(0deg);
            }

            to {
                transform: rotateX(-15deg) rotateY(360deg);
            }
        }

        .carousel-plane {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        .carousel-item-new {
            position: absolute;
            width: 150px;
            height: 105px;
            background: var(--carousel-bg-color);
            border: 3px solid var(--carousel-border-color);
            border-radius: 12px;
            box-shadow: 0 0 25px var(--carousel-glow-color), inset 0 0 15px rgba(255, 255, 255, 0.15);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.4s ease;
            cursor: pointer;
            backface-visibility: hidden;
            /* Bỏ hiệu ứng hover */
            /* .carousel-item-new:hover {
                transform: scale(1.2) translateY(-20px) rotateY(10deg) rotateX(5deg) !important;
                box-shadow: 0 0 40px var(--carousel-glow-color), 0 0 80px rgba(173, 216, 230, 0.9), inset 0 0 20px rgba(255, 255, 255, 0.3);
                z-index: 1000;
            } */
        }

        .carousel-item-new img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        /* Bỏ hiệu ứng hover */
        /* .carousel-item-new:hover img {
            opacity: 1;
        } */

        /* Positioning for the new 3D layout */
        /* Example for a few items, you'd calculate for all 25 */
        /* This creates a spiral or scattered effect */
        /* Các thuộc tính này sẽ bị ghi đè bởi JavaScript để tạo vị trí ngẫu nhiên */
        .carousel-item-new:nth-child(1) {
            transform: translate3d(-150px, -50px, 300px) rotateY(10deg) rotateX(5deg);
        }

        .carousel-item-new:nth-child(2) {
            transform: translate3d(100px, 80px, 250px) rotateY(-20deg) rotateX(-10deg);
        }

        .carousel-item-new:nth-child(3) {
            transform: translate3d(-200px, 120px, 100px) rotateY(30deg) rotateX(15deg);
        }

        .carousel-item-new:nth-child(4) {
            transform: translate3d(50px, -100px, 400px) rotateY(-5deg) rotateX(-5deg);
        }

        .carousel-item-new:nth-child(5) {
            transform: translate3d(250px, 20px, 150px) rotateY(40deg) rotateX(0deg);
        }

        /* ... (add more for all 25 images, dynamically generated or manually placed) */
        /* For a more dynamic approach, JavaScript will calculate these positions */


        /* Birthday Cake Styles (kept mostly same, minor adjustments) */
        .cake {
            position: absolute;
            width: 280px;
            height: 220px;
            top: 45%;
            left: 50%;
            margin-top: -70px;
            margin-left: -140px;
            z-index: 50;
            transform-style: preserve-3d;
            transform: rotateX(-10deg) rotateY(0deg);
            transition: transform 0.5s ease-out;
        }

        .plate {
            width: 300px;
            height: 120px;
            position: absolute;
            bottom: -15px;
            left: -10px;
            background-color: #b0b0b0;
            border-radius: 50%;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3), 0 10px 50px rgba(0, 0, 0, 0.6);
        }

        .cake>* {
            position: absolute;
        }

        .layer {
            position: absolute;
            display: block;
            width: 280px;
            height: 110px;
            border-radius: 50%;
            background-color: var(--primary-pink);
            box-shadow: 0 2px 0px var(--light-pink), 0 4px 0px var(--light-pink),
                0 6px 0px var(--light-pink), 0 8px 0px var(--light-pink),
                0 10px 0px var(--light-pink), 0 12px 0px var(--light-pink),
                0 14px 0px var(--light-pink), 0 16px 0px var(--light-pink),
                0 18px 0px var(--light-pink), 0 20px 0px var(--light-pink),
                0 22px 0px var(--light-pink), 0 24px 0px var(--light-pink),
                0 26px 0px var(--light-pink), 0 28px 0px var(--light-pink),
                0 30px 0px var(--light-pink), 0 32px 0px var(--light-pink),
                0 34px 0px var(--light-pink), 0 36px 0px var(--light-pink),
                0 38px 0px var(--light-pink), 0 40px 0px var(--light-pink);
        }

        .layer-bottom {
            top: 70px;
        }

        .layer-middle {
            top: 35px;
        }

        .layer-top {
            top: 0px;
        }

        .layer-top-2 {
            width: 200px;
            height: 100px;
            border-radius: 50%;
            background-color: var(--primary-pink);
            box-shadow: 0 2px 0px var(--light-pink), 0 4px 0px var(--light-pink),
                0 6px 0px var(--light-pink), 0 8px 0px var(--light-pink),
                0 10px 0px var(--light-pink), 0 12px 0px var(--light-pink),
                0 14px 0px var(--light-pink), 0 16px 0px var(--light-pink),
                0 18px 0px var(--light-pink), 0 20px 0px var(--light-pink),
                0 22px 0px var(--light-pink), 0 24px 0px var(--light-pink),
                0 26px 0px var(--light-pink), 0 28px 0px var(--light-pink),
                0 30px 0px var(--light-pink);
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
        }

        .icing {
            top: 2px;
            left: 5px;
            background-color: var(--cream-white);
            width: 270px;
            height: 100px;
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }

        .icing:before {
            content: "";
            position: absolute;
            top: 4px;
            right: 5px;
            bottom: 6px;
            left: 5px;
            background-color: var(--cream-white);
            box-shadow: 0 0 6px var(--cream-white);
            border-radius: 50%;
        }

        .icing-top-2 {
            top: -58px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--cream-white);
            width: 190px;
            height: 80px;
            border-radius: 50%;
            z-index: 1;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }

        .icing-top-2:before {
            content: "";
            position: absolute;
            top: 4px;
            right: 5px;
            bottom: 6px;
            left: 5px;
            background-color: var(--cream-white);
            box-shadow: 0 0 6px var(--cream-white);
            border-radius: 50%;
            z-index: 1;
        }

        .drip {
            display: block;
            width: 50px;
            height: 60px;
            border-bottom-left-radius: 25px;
            border-bottom-right-radius: 25px;
            background-color: var(--cream-white);
        }

        .drip1 {
            top: 63px;
            left: 10px;
            transform: skewY(10deg);
            height: 55px;
            width: 45px;
        }

        .drip2 {
            top: 79px;
            left: 200px;
            transform: skewY(-10deg);
            height: 60px;
            width: 50px;
        }

        .drip3 {
            top: 64px;
            left: 100px;
            width: 80px;
            height: 65px;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
        }

        .drip-top-1 {
            top: -15px;
            left: 60px;
            transform: skewY(8deg);
            height: 35px;
            width: 35px;
            background-color: var(--cream-white);
            border-bottom-left-radius: 18px;
            border-bottom-right-radius: 18px;
        }

        .drip-top-2 {
            top: -20px;
            left: 130px;
            transform: skewY(-8deg);
            height: 40px;
            width: 40px;
            background-color: var(--cream-white);
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        .candle {
            background-color: #7b020b;
            width: 18px;
            height: 60px;
            border-radius: 9px / 5px;
            top: -90px;
            left: 50%;
            margin-left: -9px;
            z-index: 10;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.3);
        }

        .candle:before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 18px;
            height: 9px;
            border-radius: 50%;
            background-color: #8f020d;
        }

        .flame {
            position: absolute;
            background-color: var(--flame-color);
            width: 18px;
            height: 40px;
            border-radius: 12px 12px 12px 12px / 30px 30px 12px 12px;
            top: -40px;
            left: 50%;
            margin-left: -9px;
            z-index: 10;
            box-shadow: 0 0 15px var(--flame-color), 0 0 30px var(--flame-color),
                0 0 80px var(--flame-color), 0 0 100px var(--flame-color);
            transform-origin: 50% 90%;
            animation: flicker 0.8s ease-in-out alternate infinite;
            cursor: pointer;
            transition: opacity 0.3s ease-out;
        }

        @keyframes flicker {
            0% {
                transform: skewX(3deg) scaleY(1);
                box-shadow: 0 0 10px var(--flame-color), 0 0 20px var(--flame-color),
                    0 0 60px var(--flame-color), 0 0 80px var(--flame-color);
            }

            25% {
                transform: skewX(-3deg) scaleY(1.05);
                box-shadow: 0 0 12px var(--flame-color), 0 0 25px var(--flame-color),
                    0 0 70px var(--flame-color), 0 0 90px var(--flame-color);
            }

            50% {
                transform: skewX(2deg) scaleY(0.98);
                box-shadow: 0 0 10px var(--flame-color), 0 0 20px var(--flame-color),
                    0 0 60px var(--flame-color), 0 0 80px var(--flame-color);
            }

            75% {
                transform: skewX(-2deg) scaleY(1.03);
                box-shadow: 0 0 12px var(--flame-color), 0 0 25px var(--flame-color),
                    0 0 70px var(--flame-color), 0 0 90px var(--flame-color);
            }

            100% {
                transform: skewX(3deg) scaleY(1);
                box-shadow: 0 0 10px var(--flame-color), 0 0 20px var(--flame-color),
                    0 0 60px var(--flame-color), 0 0 80px var(--flame-color);
            }
        }

        /* Text for Happy Birthday */
        .text {
            position: absolute;
            color: white;
            font-family: 'Dancing Script', cursive;
            text-align: center;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.9), 0 0 25px var(--primary-pink);
            width: 400px;
            font-size: 65px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            top: -120px;
            z-index: -1;
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .text.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Music Control Styles (Spotify-like) */
        .music-control {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            background: var(--music-control-bg);
            border-radius: 20px;
            padding: 18px 30px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
            display: flex;
            flex-direction: column;
            /* Thay đổi thành cột để dễ sắp xếp */
            align-items: center;
            gap: 15px;
            /* Giảm khoảng cách tổng thể */
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
            width: 450px;
            /* Đặt chiều rộng cố định */
            box-sizing: border-box;
        }

        .music-control:hover {
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            transform: translateX(-50%) translateY(-5px);
        }

        .music-control audio {
            display: none;
        }

        .music-info {
            width: 100%;
            text-align: center;
            color: #e0e0e0;
            font-size: 1.1rem;
            font-family: 'Pacifico', cursive;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .song-title {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--primary-pink);
            text-shadow: 0 0 5px rgba(255, 192, 203, 0.5);
        }

        .controls-group {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 10px;
            /* Khoảng cách giữa nhóm điều khiển và thanh tiến trình */
        }

        .music-control .play-pause-btn,
        .music-control .control-btn {
            background: var(--primary-pink);
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: 0.3s ease;
            flex-shrink: 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .music-control .control-btn {
            background: rgba(255, 255, 255, 0.1);
            /* Nút prev/next mờ hơn */
            width: 45px;
            height: 45px;
        }

        .music-control .play-pause-btn:hover {
            background: var(--light-pink);
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        .music-control .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .music-control .play-pause-btn svg,
        .music-control .control-btn svg {
            fill: white;
            width: 26px;
            height: 26px;
        }

        .music-control .control-btn svg {
            width: 20px;
            height: 20px;
        }

        .music-control .progress-container {
            flex-grow: 1;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #c0c0c0;
            font-size: 1rem;
            width: 100%;
            /* Đảm bảo thanh tiến trình chiếm toàn bộ chiều rộng */
        }

        .music-control .progress-bar {
            width: 100%;
            height: 8px;
            background: #3a3a3a;
            border-radius: 4px;
            cursor: pointer;
            position: relative;
        }

        .music-control .progress {
            height: 100%;
            width: 0%;
            background: var(--primary-pink);
            border-radius: 4px;
            transition: width 0.1s linear;
        }

        .music-control .time-display {
            min-width: 75px;
            text-align: right;
        }

        .music-control .volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #c0c0c0;
            flex-shrink: 0;
            width: 100%;
            /* Đảm bảo thanh âm lượng chiếm toàn bộ chiều rộng */
            justify-content: center;
            /* Căn giữa biểu tượng và thanh trượt */
        }

        .music-control .volume-container svg {
            fill: #c0c0c0;
            width: 22px;
            height: 22px;
        }

        .music-control .volume-slider {
            width: 150px;
            /* Tăng chiều rộng thanh trượt âm lượng */
            height: 8px;
            background: #3a3a3a;
            border-radius: 4px;
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
            outline: none;
        }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                perspective: 800px;
            }

            .carousel-container {
                width: 100vw;
                height: 100vh;
            }

            .carousel-item-new {
                width: 120px;
                height: 84px;
            }

            .cake {
                transform: scale(0.7) rotateX(-10deg);
                margin-left: -100px;
                top: 70%;
            }

            .text {
                font-size: 45px;
                top: -100px;
                width: 300px;
            }

            .music-control {
                padding: 12px 20px;
                gap: 12px;
                width: 95%;
                bottom: 15px;
            }

            .music-control .play-pause-btn {
                width: 45px;
                height: 45px;
            }

            .music-control .control-btn {
                width: 38px;
                height: 38px;
            }

            .music-control .play-pause-btn svg,
            .music-control .control-btn svg {
                width: 22px;
                height: 22px;
            }

            .music-control .control-btn svg {
                width: 18px;
                height: 18px;
            }

            .music-control .progress-container {
                font-size: 0.9rem;
                gap: 8px;
            }

            .music-control .volume-slider {
                width: 100px;
            }

            .song-title {
                font-size: 1rem;
            }

            .space-icon.fa-moon {
                font-size: 50px;
            }

            .space-icon.fa-rocket {
                font-size: 45px;
            }

            .space-icon.fa-satellite {
                font-size: 60px;
            }

            .space-icon.fa-meteor {
                font-size: 35px;
            }

            .space-icon.fa-user-astronaut {
                font-size: 70px;
            }

            .space-icon.fa-globe-americas {
                font-size: 80px;
            }

            .space-icon.fa-star-half-alt {
                font-size: 40px;
            }

            .gift-box-container {
                top: 5%;
                right: 5%;
                transform: scale(0.8);
            }

            .gift-message-content {
                font-size: 1.8rem;
                padding: 30px;
            }

            .gift-message-content h2 {
                font-size: 2.5rem;
            }

            .gift-message-content p {
                font-size: 1.4rem;
            }
        }

        @media (max-width: 480px) {
            .carousel-container {
                width: 100vw;
                height: 100vh;
            }

            .carousel-item-new {
                width: 90px;
                height: 63px;
            }

            .cake {
                transform: scale(0.6) rotateX(-10deg);
                margin-left: -85px;
                top: 75%;
            }

            .text {
                font-size: 35px;
                top: -80px;
                width: 250px;
            }

            .music-control {
                padding: 10px 15px;
                gap: 8px;
                bottom: 10px;
                width: 98%;
            }

            .music-control .play-pause-btn {
                width: 40px;
                height: 40px;
            }

            .music-control .control-btn {
                width: 35px;
                height: 35px;
            }

            .music-control .play-pause-btn svg,
            .music-control .control-btn svg {
                width: 18px;
                height: 18px;
            }

            .music-control .control-btn svg {
                width: 16px;
                height: 16px;
            }

            .music-control .progress-container {
                font-size: 0.75rem;
                gap: 5px;
            }

            .music-control .volume-slider {
                width: 80px;
            }

            .song-title {
                font-size: 0.9rem;
            }

            .gift-box-container {
                top: 2%;
                right: 2%;
                transform: scale(0.6);
            }

            .gift-message-content {
                font-size: 1.2rem;
                padding: 20px;
                max-width: 90vw;
            }

            .gift-message-content h2 {
                font-size: 2rem;
            }

            .gift-message-content p {
                font-size: 1rem;
            }
        }

        /* Style cho overlay ảnh lớn */
        #imageOverlay {
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            /* Ban đầu ẩn */
        }

        #imageOverlay.show {
            opacity: 1;
            /* Hiển thị */
        }

        /* Gift Box Styles */
        .gift-box-container {
            position: absolute;
            top: 15%;
            /* Điều chỉnh vị trí */
            right: 10%;
            /* Điều chỉnh vị trí */
            z-index: 60;
            /* Đảm bảo nằm trên các lớp sao */
            perspective: 1000px;
            cursor: pointer;
            transition: transform 0.3s ease-out;
        }

        .gift-box-container:hover {
            transform: scale(1.05) translateY(-5px);
        }

        .gift-box {
            width: 100px;
            height: 100px;
            background-color: var(--gift-box-color);
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(15deg) rotateY(-15deg);
            /* Góc nhìn 3D ban đầu */
            box-shadow: 10px 10px 20px var(--gift-shadow-color);
            border-radius: 5px;
        }

        .gift-box:before {
            /* Top lid */
            content: '';
            position: absolute;
            width: 110%;
            height: 20px;
            background-color: var(--gift-box-color);
            top: -20px;
            left: -5%;
            transform: translateZ(0px) rotateX(0deg);
            transform-origin: bottom;
            box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.3);
            border-radius: 5px 5px 0 0;
        }

        .gift-box:after {
            /* Ribbon vertical */
            content: '';
            position: absolute;
            width: 20px;
            height: 100%;
            background-color: var(--gift-ribbon-color);
            left: 50%;
            transform: translateX(-50%);
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
        }

        .gift-box .ribbon-horizontal {
            position: absolute;
            width: 100%;
            height: 20px;
            background-color: var(--gift-ribbon-color);
            top: 50%;
            transform: translateY(-50%);
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
        }

        .gift-box .bow {
            position: absolute;
            width: 40px;
            height: 40px;
            top: -45px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        .gift-box .bow:before,
        .gift-box .bow:after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            background-color: var(--gift-ribbon-color);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .gift-box .bow:before {
            left: 0;
            transform: rotate(45deg);
        }

        .gift-box .bow:after {
            right: 0;
            transform: rotate(-45deg);
        }

        .gift-message-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            backdrop-filter: blur(10px);
        }

        .gift-message-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .gift-message-content {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            /* Dark gradient */
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            color: white;
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            max-width: 600px;
            box-shadow: 0 0 30px rgba(173, 216, 230, 0.8), 0 0 60px rgba(173, 216, 230, 0.5);
            position: relative;
            transform: scale(0.8);
            opacity: 0;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.5s ease;
        }

        .gift-message-overlay.show .gift-message-content {
            transform: scale(1);
            opacity: 1;
        }

        .gift-message-content h2 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            color: var(--primary-pink);
            text-shadow: 0 0 10px var(--primary-pink);
        }

        .gift-message-content p {
            font-size: 1.8rem;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .gift-message-content .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .gift-message-content .close-btn:hover {
            color: var(--primary-pink);
        }

        /* CSS cho các hộp quà mới */
        .gift-box-container.small {
            width: 60px;
            /* Kích thước nhỏ hơn */
            height: 60px;
            top: auto;
            /* Bỏ vị trí cố định */
            right: auto;
            /* Bỏ vị trí cố định */
            position: absolute;
            /* Quan trọng để floatIcon hoạt động */
            transform: scale(1);
            /* Đảm bảo kích thước ban đầu */
            animation: floatIcon 25s ease-in-out infinite alternate;
            /* Áp dụng animation của space-icon */
            cursor: pointer;
            transition: transform 0.3s ease-out;
        }

        .gift-box-container.small:hover {
            transform: scale(1.1) translateY(-5px);
            /* Hiệu ứng hover nhẹ */
        }

        .gift-box-container.small .gift-box {
            width: 60px;
            height: 60px;
            transform: rotateX(15deg) rotateY(-15deg);
        }

        .gift-box-container.small .gift-box:before {
            width: 110%;
            height: 12px;
            /* Nắp nhỏ hơn */
            top: -12px;
        }

        .gift-box-container.small .gift-box:after {
            width: 12px;
            /* Ruy băng nhỏ hơn */
        }

        .gift-box-container.small .ribbon-horizontal {
            height: 12px;
            /* Ruy băng nhỏ hơn */
        }

        .gift-box-container.small .bow {
            width: 25px;
            /* Nơ nhỏ hơn */
            height: 25px;
            top: -28px;
            /* Điều chỉnh vị trí nơ */
        }

        .gift-box-container.small .bow:before,
        .gift-box-container.small .bow:after {
            content: '';
            position: absolute;
            width: 15px;
            /* Nơ nhỏ hơn */
            height: 15px;
            background-color: var(--gift-ribbon-color);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        /* Các màu sắc và kích thước khác nhau cho hộp quà */
        .gift-box-container.medium-2 {
            top: 25%;
            left: 15%;
            transform: scale(0.9);
            /* Kích thước trung bình */
        }

        .gift-box-container.medium-2 .gift-box {
            background-color: var(--gift-box-color-2);
        }

        .gift-box-container.medium-2 .gift-box:before {
            background-color: var(--gift-box-color-2);
        }

        .gift-box-container.medium-2 .ribbon-horizontal,
        .gift-box-container.medium-2 .gift-box:after,
        .gift-box-container.medium-2 .bow:before,
        .gift-box-container.medium-2 .bow:after {
            background-color: var(--gift-ribbon-color-2);
        }

        .gift-box-container.large-3 {
            top: 60%;
            right: 20%;
            transform: scale(1.1);
            /* Kích thước lớn hơn */
        }

        .gift-box-container.large-3 .gift-box {
            background-color: var(--gift-box-color-3);
        }

        .gift-box-container.large-3 .gift-box:before {
            background-color: var(--gift-box-color-3);
        }

        .gift-box-container.large-3 .ribbon-horizontal,
        .gift-box-container.large-3 .gift-box:after,
        .gift-box-container.large-3 .bow:before,
        .gift-box-container.large-3 .bow:after {
            background-color: var(--gift-ribbon-color-3);
        }

        /* Vị trí và màu sắc cho 3 hộp quà nhỏ */
        .gift-box-container.small-1 {
            top: 10%;
            left: 5%;
            --initial-rotation: 10deg;
            /* Để floatIcon hoạt động */
        }

        .gift-box-container.small-1 .gift-box {
            background-color: var(--small-gift-box-color-1);
        }

        .gift-box-container.small-1 .gift-box:before {
            background-color: var(--small-gift-box-color-1);
        }

        .gift-box-container.small-1 .ribbon-horizontal,
        .gift-box-container.small-1 .gift-box:after,
        .gift-box-container.small-1 .bow:before,
        .gift-box-container.small-1 .bow:after {
            background-color: var(--small-gift-ribbon-color-1);
        }

        .gift-box-container.small-2 {
            top: 80%;
            left: 10%;
            --initial-rotation: -20deg;
            animation-delay: 7s;
            /* Delay để không trùng với các icon khác */
        }

        .gift-box-container.small-2 .gift-box {
            background-color: var(--small-gift-box-color-2);
        }

        .gift-box-container.small-2 .gift-box:before {
            background-color: var(--small-gift-box-color-2);
        }

        .gift-box-container.small-2 .ribbon-horizontal,
        .gift-box-container.small-2 .gift-box:after,
        .gift-box-container.small-2 .bow:before,
        .gift-box-container.small-2 .bow:after {
            background-color: var(--small-gift-ribbon-color-2);
        }

        .gift-box-container.small-3 {
            top: 20%;
            right: 5%;
            --initial-rotation: 30deg;
            animation-delay: 12s;
        }

        .gift-box-container.small-3 .gift-box {
            background-color: var(--small-gift-box-color-3);
        }

        .gift-box-container.small-3 .gift-box:before {
            background-color: var(--small-gift-box-color-3);
        }

        .gift-box-container.small-3 .ribbon-horizontal,
        .gift-box-container.small-3 .gift-box:after,
        .gift-box-container.small-3 .bow:before,
        .gift-box-container.small-3 .bow:after {
            background-color: var(--small-gift-ribbon-color-3);
        }

        /* CSS cho lời chúc hover */
        .gift-hover-message {
            position: absolute;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            transform: translateY(10px);
            z-index: 100;
            /* Đảm bảo nằm trên các lớp khác */
            font-family: 'Dancing Script', cursive;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        .gift-box-container.small:hover .gift-hover-message {
            opacity: 1;
            transform: translateY(-10px);
        }

        /* Thiếp chúc mừng */
        .greeting-card-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            backdrop-filter: blur(15px);
        }

        .greeting-card-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .greeting-card-content {
            background: linear-gradient(135deg, #fdf5e6, #ffc0cb);
            /* Light, elegant gradient */
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            color: #333;
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            max-width: 700px;
            box-shadow: 0 0 40px rgba(255, 192, 203, 0.8), 0 0 80px rgba(255, 192, 203, 0.5);
            position: relative;
            transform: scale(0.8);
            opacity: 0;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.5s ease;
            border: 2px solid var(--primary-pink);
        }

        .greeting-card-overlay.show .greeting-card-content {
            transform: scale(1);
            opacity: 1;
        }

        .greeting-card-content h2 {
            font-size: 4rem;
            margin-bottom: 25px;
            color: var(--primary-pink);
            text-shadow: 0 0 15px var(--primary-pink);
        }

        .greeting-card-content p {
            font-size: 2rem;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #555;
        }

        .greeting-card-content .signature {
            font-size: 2.2rem;
            margin-top: 30px;
            color: var(--dark-bg-start);
            font-weight: bold;
        }

        .greeting-card-content .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #333;
            font-size: 2.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .greeting-card-content .close-btn:hover {
            color: var(--primary-pink);
        }

        /* Responsive cho thiếp chúc mừng */
        @media (max-width: 768px) {
            .greeting-card-content {
                padding: 25px;
                font-size: 1.5rem;
            }

            .greeting-card-content h2 {
                font-size: 3rem;
            }

            .greeting-card-content p {
                font-size: 1.5rem;
            }

            .greeting-card-content .signature {
                font-size: 1.8rem;
            }

            .greeting-card-content .close-btn {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .greeting-card-content {
                padding: 20px;
                font-size: 1.2rem;
                max-width: 90vw;
            }

            .greeting-card-content h2 {
                font-size: 2.5rem;
            }

            .greeting-card-content p {
                font-size: 1.2rem;
            }

            .greeting-card-content .signature {
                font-size: 1.5rem;
            }

            .greeting-card-content .close-btn {
                font-size: 1.8rem;
            }
        }
    </style>
</head>

<body>
    <div class="stars">
        <div class="stars-layer stars-extra-small" data-depth="0.05"></div>
        <div class="stars-layer stars-small" data-depth="0.1"></div>
        <div class="stars-layer stars-medium" data-depth="0.2"></div>
        <div class="stars-layer stars-large" data-depth="0.3"></div>
        <div class="stars-layer stars-extra-large" data-depth="0.35"></div>
        <div class="stars-layer stars-twinkling" data-depth="0.4"></div>
    </div>

    <!-- Shooting Star Container -->
    <div class="shooting-star-container"></div>

    <!-- Space Icons -->
    <i class="fas fa-moon space-icon"></i>
    <i class="fas fa-rocket space-icon"></i>
    <i class="fas fa-satellite space-icon"></i>
    <i class="fas fa-meteor space-icon"></i>
    <i class="fas fa-user-astronaut space-icon"></i>
    <i class="fas fa-globe-americas space-icon"></i>
    <i class="fas fa-star-half-alt space-icon"></i>


    <div class="scene">
        <div class="carousel-container" id="carouselContainer">
            <!-- Images will be dynamically added here by JavaScript -->
        </div>

        <!-- Birthday Cake Structure -->
        <div class="cake">
            <div class="plate"></div>
            <div class="layer layer-bottom"></div>
            <div class="layer layer-middle"></div>
            <div class="layer layer-top"></div>
            <div class="icing"></div>
            <div class="drip drip1"></div>
            <div class="drip drip2"></div>
            <div class="drip drip3"></div>

            <!-- Second Tier -->
            <div class="layer layer-top-2"></div>
            <div class="icing-top-2"></div>
            <div class="drip drip-top-1"></div>
            <div class="drip drip-top-2"></div>

            <div class="candle">
                <div class="flame"></div>
            </div>
            <div class="text" id="birthdayText">Happy Birthday!</div>
        </div>

        <!-- Gift Box (Original) -->
        <div class="gift-box-container" id="giftBox">
            <div class="gift-box">
                <div class="ribbon-horizontal"></div>
                <div class="bow"></div>
            </div>
        </div>

        <!-- 3 hộp quà nhỏ, CSS giống icon vũ trụ -->
        <div class="gift-box-container small small-1" id="smallGiftBox1" data-message-id="message1">
            <div class="gift-box">
                <div class="ribbon-horizontal"></div>
                <div class="bow"></div>
            </div>
            <div class="gift-hover-message">Mở quà này nhé!</div>
        </div>

        <div class="gift-box-container small small-2" id="smallGiftBox2" data-message-id="message2">
            <div class="gift-box">
                <div class="ribbon-horizontal"></div>
                <div class="bow"></div>
            </div>
            <div class="gift-hover-message">Có điều bất ngờ!</div>
        </div>

        <div class="gift-box-container small small-3" id="smallGiftBox3" data-message-id="message3">
            <div class="gift-box">
                <div class="ribbon-horizontal"></div>
                <div class="bow"></div>
            </div>
            <div class="gift-hover-message">Món quà nhỏ cho bạn!</div>
        </div>

        <div class="music-control">
            <audio id="myAudio" preload="auto"></audio>

            <div class="music-info">
                <span id="songTitle" class="song-title"></span>
            </div>

            <div class="controls-group">
                <button class="control-btn" id="prevBtn">
                    <svg viewBox="0 0 24 24">
                        <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
                    </svg>
                </button>
                <button class="play-pause-btn" id="playPauseBtn">
                    <svg id="playIcon" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                    <svg id="pauseIcon" style="display:none;" viewBox="0 0 24 24">
                        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                    </svg>
                </button>
                <button class="control-btn" id="nextBtn">
                    <svg viewBox="0 0 24 24">
                        <path d="M16 18h2V6h-2zM6 18l8.5-6L6 6z" />
                    </svg>
                </button>
            </div>

            <div class="progress-container">
                <span class="current-time" id="currentTime">0:00</span>
                <div class="progress-bar" id="progressBar">
                    <div class="progress" id="progress"></div>
                </div>
                <span class="duration" id="duration">0:00</span>
            </div>

            <div class="volume-container">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                </svg>
                <input type="range" min="0" max="1" step="0.01" value="0.7" class="volume-slider" id="volumeSlider">
            </div>
        </div>
    </div>

    <!-- Overlay để hiển thị ảnh lớn -->
    <div id="imageOverlay"
        class="fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-[9999] hidden">
        <img id="overlayImage" src="" alt="Large Image"
            class="max-w-[90vw] max-h-[90vh] object-contain rounded-lg shadow-lg">
    </div>

    <!-- Overlay cho lời chúc (original gift box) -->
    <div id="giftMessageOverlay" class="gift-message-overlay">
        <div class="gift-message-content">
            <button class="close-btn">&times;</button>
            <h2 id="giftMessageTitle"></h2>
            <p id="giftMessageContent"></p>
            <p id="giftMessageSignature"></p>
        </div>
    </div>

    <!-- Thiếp chúc mừng mới (cho 3 hộp quà nhỏ) -->
    <div id="greetingCardOverlay" class="greeting-card-overlay">
        <div class="greeting-card-content">
            <button class="close-btn">&times;</button>
            <h2 id="greetingCardTitle"></h2>
            <p id="greetingCardText"></p>
            <p class="signature" id="greetingCardSignature"></p>
        </div>
    </div>

    <!-- Canvas cho hiệu ứng pháo hoa/bong bóng -->
    <canvas id="fireworksCanvas"
        style="position: fixed; top: 0; left: 0; z-index: 9998; pointer-events: none;"></canvas>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            const birthdayText = document.getElementById('birthdayText');
            const flame = $(".flame");

            // Blow candles functionality
            flame.on('click', function () {
                $(this).animate({ "opacity": 0 }, "fast", function () {
                    birthdayText.classList.add('show');
                });
            });

            // Music Player Controls
            const audio = document.getElementById('myAudio');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            const progressBar = document.getElementById('progressBar');
            const progress = document.getElementById('progress');
            const currentTimeSpan = document.getElementById('currentTime');
            const durationSpan = document.getElementById('duration');
            const volumeSlider = document.getElementById('volumeSlider');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const songTitleSpan = document.getElementById('songTitle');

            const playlist = [
                { name: "2014 - Ronboogz", path: "../mp3/2014  Ronboogz (Lyrics video) - Ronboogz.mp3" },
                { name: "Hai đứa nhóc - Ronboogz", path: "../mp3/videoplayback.m4a" }
            ];
            let currentSongIndex = 0;

            function loadSong(index) {
                audio.src = playlist[index].path;
                songTitleSpan.textContent = playlist[index].name;
                audio.load(); // Load the new song
            }

            function playSong() {
                audio.play();
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            }

            function pauseSong() {
                audio.pause();
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }

            function nextSong() {
                currentSongIndex = (currentSongIndex + 1) % playlist.length;
                loadSong(currentSongIndex);
                playSong();
            }

            function prevSong() {
                currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length;
                loadSong(currentSongIndex);
                playSong();
            }

            audio.volume = volumeSlider.value;
            loadSong(currentSongIndex); // Load the first song

            function formatTime(seconds) {
                const minutes = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
            }

            playPauseBtn.addEventListener('click', () => {
                if (audio.paused) {
                    playSong();
                } else {
                    pauseSong();
                }
            });

            prevBtn.addEventListener('click', prevSong);
            nextBtn.addEventListener('click', nextSong);

            audio.addEventListener('timeupdate', () => {
                if (!isNaN(audio.duration)) {
                    const progressPercent = (audio.currentTime / audio.duration) * 100;
                    progress.style.width = `${progressPercent}%`;
                    currentTimeSpan.textContent = formatTime(audio.currentTime);
                }
            });

            audio.addEventListener('loadedmetadata', () => {
                if (!isNaN(audio.duration)) {
                    durationSpan.textContent = formatTime(audio.duration);
                }
            });

            progressBar.addEventListener('click', (e) => {
                const clickX = e.offsetX;
                const width = progressBar.clientWidth;
                const duration = audio.duration;
                if (!isNaN(duration)) {
                    audio.currentTime = (clickX / width) * duration;
                }
            });

            volumeSlider.addEventListener('input', () => {
                audio.volume = volumeSlider.value;
            });

            audio.addEventListener('ended', () => {
                nextSong(); // Play next song when current one ends
            });

            let hasInteracted = false;
            document.addEventListener('click', function firstInteraction() {
                if (!hasInteracted && audio.paused) {
                    playSong(); // Attempt to play on first interaction
                    hasInteracted = true;
                }
                document.removeEventListener('click', firstInteraction);
            }, { once: true }); // Ensure this listener only runs once


            // Mouse trail stars functionality (kept same)
            const colors = ['#FFD700', '#FF6347', '#ADFF2F', '#87CEEB', '#EE82EE', '#FFA07A', '#F0E68C', '#ADD8E6'];
            let lastStarTime = 0;
            const minStarInterval = 30;

            document.addEventListener('mousemove', (e) => {
                const now = Date.now();
                if (now - lastStarTime < minStarInterval) {
                    return;
                }
                lastStarTime = now;

                const star = document.createElement('div');
                star.classList.add('mouse-star');
                star.style.left = `${e.clientX}px`;
                star.style.top = `${e.clientY}px`;
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                star.style.backgroundColor = randomColor;
                star.style.boxShadow = `0 0 5px ${randomColor}, 0 0 10px ${randomColor}, 0 0 15px rgba(255,255,255,0.5)`;

                document.body.appendChild(star);

                star.addEventListener('animationend', () => {
                    star.remove();
                });
            });

            // Shooting Star JavaScript (kept same)
            const shootingStarContainer = document.querySelector('.shooting-star-container');

            function createShootingStar() {
                const star = document.createElement('div');
                star.classList.add('shooting-star');

                const startX = Math.random() * window.innerWidth * 0.7;
                const startY = Math.random() * window.innerHeight * 0.2;
                star.style.left = `${startX}px`;
                star.style.top = `${startY}px`;

                const animationDuration = Math.random() * 2 + 2.5;
                star.style.animationDuration = `${animationDuration}s`;

                const endX = startX + (Math.random() * 500 + 400);
                const endY = startY + (Math.random() * 500 + 400);
                const rotation = Math.random() * 60 - 30;

                const styleSheet = document.styleSheets[0];
                const keyframeName = `shoot-${Date.now()}-${Math.floor(Math.random() * 1000)}`;
                const shootKeyframes = `@keyframes ${keyframeName} {
                    0% {
                        transform: translate(0, 0) rotate(${rotation}deg);
                        opacity: 0;
                    }
                    10% {
                        opacity: 1;
                    }
                    100% {
                        transform: translate(${endX - startX}px, ${endY - startY}px) rotate(${rotation}deg);
                        opacity: 0;
                    }
                }`;
                styleSheet.insertRule(shootKeyframes, styleSheet.cssRules.length);
                star.style.animationName = keyframeName;


                shootingStarContainer.appendChild(star);

                star.addEventListener('animationend', () => {
                    star.remove();
                    try {
                        for (let i = 0; i < styleSheet.cssRules.length; i++) {
                            if (styleSheet.cssRules[i].name === keyframeName) {
                                styleSheet.deleteRule(i);
                                break;
                            }
                        }
                    } catch (e) {
                        console.warn("Could not delete keyframe rule:", e);
                    }
                });
            }

            setInterval(createShootingStar, Math.random() * 4000 + 4000);

            // Parallax effect for stars (kept same)
            const starLayers = document.querySelectorAll('.stars-layer');
            document.addEventListener('mousemove', (e) => {
                const mouseX = e.clientX / window.innerWidth - 0.5;
                const mouseY = e.clientY / window.innerHeight - 0.5;

                starLayers.forEach(layer => {
                    const depth = parseFloat(layer.dataset.depth);
                    const translateX = -mouseX * depth * 50;
                    const translateY = -mouseY * depth * 50;
                    layer.style.transform = `translate(${translateX}px, ${translateY}px)`;
                });
            });

            // New 3D Carousel Logic
            const imagePaths = [
                "../image/Chunss/6E12E452-D2C6-47D3-AF9A-6F9A5939B567.JPG",
                "../image/Chunss/9AF1F8B5-9F93-4272-84C8-8F49198406BC.JPG",
                "../image/Chunss/B8DF8471-2AC5-49CB-A31D-4CDB8E797A73.JPG",
                "../image/Chunss/E529869E-A241-47AF-B64F-F9D35AB06E07.JPG",
                "../image/Chunss/F63C370A-FE90-41D1-B275-A67049EFCC84.jpg",
                "../image/Chunss/IMG_2046.JPG",
                "../image/Chunss/IMG_2097.JPG",
                "../image/Chunss/IMG_3213.HEIC",
                "../image/Chunss/IMG_5895.JPG",
                "../image/Chunss/IMG_5934.JPG",
                "../image/Chunss/IMG_9337.JPG",
                "../image/Chunss/IMG_9447.PNG",
                "../image/Chunss/IMG_9448.PNG",
                "../image/Chunss/IMG_9622.JPG",
                "../image/Chunss/IMG_9624.JPG",
                "../image/Chunss/IMG_9625.JPG",
                "../image/Chunss/IMG_9626.JPG",
                "../image/Chunss/IMG_9629.JPG",
                "../image/Chunss/IMG_9630.JPG",
                "../image/Chunss/IMG_9632.JPG",
                "../image/Chunss/IMG_9631.JPG",
                "../image/Chunss/IMG_9633.JPG",
                "../image/Chunss/IMG_9634.JPG",
                "../image/Chunss/IMG_9635.JPG"
            ];

            const carouselContainer = document.getElementById('carouselContainer');
            const numImages = imagePaths.length;
            // Tăng bán kính để ảnh phân tán rộng hơn và sâu hơn
            const radius = 1200; // Tăng bán kính để ảnh bay xa hơn
            const maxTranslateZ = 1500; // Tăng độ sâu tối đa
            const minTranslateZ = -1500; // Cho phép ảnh bay ra phía sau người xem

            // Tăng số lượng ảnh xuất hiện bằng cách lặp lại mảng imagePaths hoặc tạo thêm ảnh ảo
            const totalImagesToShow = 75; // Ví dụ: hiển thị 50 ảnh thay vì chỉ 25
            const extendedImagePaths = [];
            for (let i = 0; i < totalImagesToShow; i++) {
                extendedImagePaths.push(imagePaths[i % imagePaths.length]);
            }


            function create3DCarouselItems() {
                extendedImagePaths.forEach((path, index) => {
                    const item = document.createElement('div');
                    item.classList.add('carousel-item-new');

                    const img = document.createElement('img');
                    img.src = path;
                    img.alt = `Carousel Image ${index + 1}`;
                    item.appendChild(img);

                    // Calculate random positions and rotations for a "floating" effect
                    // Sử dụng Math.random() để tạo vị trí ngẫu nhiên hoàn toàn, không theo hình tròn
                    const x = (Math.random() - 0.5) * window.innerWidth * 3; // Tăng phạm vi phân tán ảnh
                    const y = (Math.random() - 0.5) * window.innerHeight * 3; // Tăng phạm vi phân tán ảnh
                    const z = Math.random() * (maxTranslateZ - minTranslateZ) + minTranslateZ; // Thay đổi độ sâu

                    const rotateX = Math.random() * 360; // Xoay ngẫu nhiên 360 độ
                    const rotateY = Math.random() * 360;
                    const rotateZ = Math.random() * 360;

                    item.style.transform = `translate3d(${x}px, ${y}px, ${z}px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) rotateZ(${rotateZ}deg)`;
                    item.style.zIndex = Math.floor(z); // Items further back have lower z-index

                    carouselContainer.appendChild(item);
                });
            }

            create3DCarouselItems();

            // Add mouse interaction for rotating the carousel container
            let isDragging = false;
            let startX, startY;
            let currentRotateY = 0;
            let currentRotateX = -15; // Initial X rotation
            let dragThreshold = 5; // Ngưỡng để xác định có phải là kéo hay không

            carouselContainer.addEventListener('mousedown', (e) => {
                isDragging = false; // Reset isDragging
                startX = e.clientX;
                startY = e.clientY;
                carouselContainer.style.animationPlayState = 'paused'; // Pause auto-rotation
                carouselContainer.style.cursor = 'grabbing';
            });

            document.addEventListener('mousemove', (e) => {
                if (startX === null || startY === null) return; // Đảm bảo đã có điểm bắt đầu

                const dx = e.clientX - startX;
                const dy = e.clientY - startY;

                if (Math.abs(dx) > dragThreshold || Math.abs(dy) > dragThreshold) {
                    isDragging = true; // Nếu di chuyển đủ xa, coi là đang kéo
                }

                if (isDragging) {
                    currentRotateY += dx * 0.2; // Adjust sensitivity
                    currentRotateX -= dy * 0.2; // Adjust sensitivity

                    // Limit X rotation to prevent flipping
                    currentRotateX = Math.max(-90, Math.min(90, currentRotateX));

                    carouselContainer.style.transform = `rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
                }

                // Cập nhật startX, startY cho lần di chuyển tiếp theo
                startX = e.clientX;
                startY = e.clientY;
            });

            document.addEventListener('mouseup', () => {
                startX = null; // Reset điểm bắt đầu
                startY = null;
                isDragging = false; // Đảm bảo reset trạng thái kéo
                carouselContainer.style.animationPlayState = 'running'; // Resume auto-rotation
                carouselContainer.style.cursor = 'grab';
            });

            // Initial cursor style
            carouselContainer.style.cursor = 'grab';

            // Logic hiển thị ảnh lớn khi click vào carousel item
            const imageOverlay = document.getElementById('imageOverlay');
            const overlayImage = document.getElementById('overlayImage');

            carouselContainer.addEventListener('click', (e) => {
                const clickedItem = e.target.closest('.carousel-item-new');
                // console.log("Click event on carouselContainer. isDragging:", isDragging); // Debugging
                if (clickedItem && !isDragging) { // Chỉ xử lý click nếu không đang kéo
                    const imgSrc = clickedItem.querySelector('img').src;
                    overlayImage.src = imgSrc;
                    imageOverlay.classList.add('show');
                    imageOverlay.classList.remove('hidden');
                    document.body.classList.add('no-scroll'); // Thêm class để ẩn thanh cuộn
                }
                // Reset isDragging sau khi xử lý click để tránh ảnh hưởng đến các click tiếp theo
                isDragging = false;
            });

            imageOverlay.addEventListener('click', () => {
                imageOverlay.classList.remove('show');
                imageOverlay.classList.add('hidden');
                document.body.classList.remove('no-scroll'); // Xóa class để hiện thanh cuộn
            });

            // Gift Box Message Logic (Original)
            const giftBox = document.getElementById('giftBox');
            const giftMessageOverlay = document.getElementById('giftMessageOverlay');
            const giftMessageTitle = document.getElementById('giftMessageTitle');
            const giftMessageContent = document.getElementById('giftMessageContent');
            const giftMessageSignature = document.getElementById('giftMessageSignature');
            const closeGiftMessageBtn = giftMessageOverlay.querySelector('.close-btn');

            // Lời chúc cho hộp quà lớn
            const mainGiftMessage = {
                title: "Gửi Chang yêu quý!",
                content: "Chúc mừng sinh nhật Chang của tớ! Mỗi ngày bên cậu đều là một món quà. Tớ mong cậu luôn vui vẻ, hạnh phúc, và đạt được mọi điều cậu mong muốn. Hãy luôn là cô gái đáng yêu và rạng rỡ nhất nhé!",
                signature: "— Vịt"
            };

            giftBox.addEventListener('click', () => {
                giftMessageTitle.textContent = mainGiftMessage.title;
                giftMessageContent.textContent = mainGiftMessage.content;
                giftMessageSignature.textContent = mainGiftMessage.signature;
                giftMessageOverlay.classList.add('show');
                document.body.classList.add('no-scroll'); // Thêm class để ẩn thanh cuộn
            });

            closeGiftMessageBtn.addEventListener('click', () => {
                giftMessageOverlay.classList.remove('show');
                document.body.classList.remove('no-scroll'); // Xóa class để hiện thanh cuộn
            });

            // Close overlay when clicking outside the content
            giftMessageOverlay.addEventListener('click', (e) => {
                if (e.target === giftMessageOverlay) {
                    giftMessageOverlay.classList.remove('show');
                    document.body.classList.remove('no-scroll');
                }
            });

            // --- New Gift Box Logic (for the 3 small boxes) ---
            const smallGiftBoxes = document.querySelectorAll('.gift-box-container.small');
            const greetingCardOverlay = document.getElementById('greetingCardOverlay');
            const greetingCardTitle = document.getElementById('greetingCardTitle');
            const greetingCardText = document.getElementById('greetingCardText');
            const greetingCardSignature = document.getElementById('greetingCardSignature');
            const closeGreetingCardBtn = greetingCardOverlay.querySelector('.close-btn');
            const fireworksCanvas = document.getElementById('fireworksCanvas');

            // Các lời chúc riêng cho từng hộp quà nhỏ
            const smallGiftMessages = {
                message1: {
                    title: "Chúc mừng sinh nhật!",
                    content: "Chúc Chang luôn xinh đẹp, rạng rỡ, và tràn đầy năng lượng tích cực trong cuộc sống!",
                    signature: "Người bạn bí mật"
                },
                message2: {
                    title: "Happy Birthday, Chang!",
                    content: "Mãi là cô gái đáng yêu, hạnh phúc và thành công trên con đường mình đã chọn nhé!",
                    signature: "Một người hâm mộ"
                },
                message3: {
                    title: "Gửi Chang thân mến!",
                    content: "Vạn sự như ý, tỉ sự như mơ, thành công trong mọi việc và luôn giữ nụ cười trên môi nhé!",
                    signature: "Ai đó rất quan tâm"
                }
            };

            // Function to trigger fireworks/balloons and show greeting card
            function triggerGiftEffect(messageId) {
                // Lấy lời chúc tương ứng
                const message = smallGiftMessages[messageId];
                if (!message) return;

                greetingCardTitle.textContent = message.title;
                greetingCardText.textContent = message.content;
                greetingCardSignature.textContent = message.signature;

                // Kích hoạt hiệu ứng pháo hoa/bong bóng
                startFireworksAndBalloons();

                // Sau một khoảng thời gian ngắn, hiển thị thiếp chúc mừng
                setTimeout(() => {
                    greetingCardOverlay.classList.add('show');
                    document.body.classList.add('no-scroll'); // Thêm class để ẩn thanh cuộn
                }, 1500); // Chờ 1.5 giây để hiệu ứng pháo hoa bắt đầu
            }

            // Add event listeners for the 3 small gift boxes
            smallGiftBoxes.forEach(box => {
                box.addEventListener('click', () => {
                    const messageId = box.dataset.messageId;
                    triggerGiftEffect(messageId);
                });
            });

            // Close greeting card
            closeGreetingCardBtn.addEventListener('click', () => {
                greetingCardOverlay.classList.remove('show');
                document.body.classList.remove('no-scroll'); // Xóa class để hiện thanh cuộn
                stopFireworksAndBalloons(); // Dừng hiệu ứng khi đóng thiếp
            });

            greetingCardOverlay.addEventListener('click', (e) => {
                if (e.target === greetingCardOverlay) {
                    greetingCardOverlay.classList.remove('show');
                    document.body.classList.remove('no-scroll');
                    stopFireworksAndBalloons();
                }
            });

            // --- Integrate happy birtday.js (Fireworks and Balloons) ---
            let w, h, ctx, hw, hh;
            let opts, calc, Tau, TauQuarter, letters;
            let animationFrameId; // To store the animation frame ID for stopping

            function initFireworksAndBalloons() {
                w = fireworksCanvas.width = window.innerWidth;
                h = fireworksCanvas.height = window.innerHeight;
                ctx = fireworksCanvas.getContext("2d");
                hw = w / 2;
                hh = h / 2;

                opts = {
                    strings: ["HAPPY", "BIRTHDAY!", "TO YOU!"], // Có thể tùy chỉnh lời chúc ở đây
                    charSize: 30,
                    charSpacing: 35,
                    lineHeight: 40,

                    cx: w / 2,
                    cy: h / 2,

                    fireworkPrevPoints: 10,
                    fireworkBaseLineWidth: 5,
                    fireworkAddedLineWidth: 8,
                    fireworkSpawnTime: 200,
                    fireworkBaseReachTime: 30,
                    fireworkAddedReachTime: 30,
                    fireworkCircleBaseSize: 20,
                    fireworkCircleAddedSize: 10,
                    fireworkCircleBaseTime: 30,
                    fireworkCircleAddedTime: 30,
                    fireworkCircleFadeBaseTime: 10,
                    fireworkCircleFadeAddedTime: 5,
                    fireworkBaseShards: 5,
                    fireworkAddedShards: 5,
                    fireworkShardPrevPoints: 3,
                    fireworkShardBaseVel: 4,
                    fireworkShardAddedVel: 2,
                    fireworkShardBaseSize: 3,
                    fireworkShardAddedSize: 3,
                    gravity: 0.1,
                    upFlow: -0.1,
                    letterContemplatingWaitTime: 360,
                    balloonSpawnTime: 20,
                    balloonBaseInflateTime: 10,
                    balloonAddedInflateTime: 10,
                    balloonBaseSize: 20,
                    balloonAddedSize: 20,
                    balloonBaseVel: 0.4,
                    balloonAddedVel: 0.4,
                    balloonBaseRadian: -(Math.PI / 2 - 0.5),
                    balloonAddedRadian: -1,
                };

                calc = {
                    totalWidth:
                        opts.charSpacing *
                        Math.max(opts.strings[0].length, opts.strings[1].length),
                };

                Tau = Math.PI * 2;
                TauQuarter = Tau / 4;
                letters = [];

                ctx.font = opts.charSize + "px Verdana";

                for (let i = 0; i < opts.strings.length; ++i) {
                    for (var j = 0; j < opts.strings[i].length; ++j) {
                        letters.push(
                            new Letter(
                                opts.strings[i][j],
                                j * opts.charSpacing +
                                opts.charSpacing / 2 -
                                (opts.strings[i].length * opts.charSize) / 2,
                                i * opts.lineHeight +
                                opts.lineHeight / 2 -
                                (opts.strings.length * opts.lineHeight) / 2
                            )
                        );
                    }
                }
            }

            function Letter(char, x, y) {
                this.char = char;
                this.x = x;
                this.y = y;

                this.dx = -ctx.measureText(char).width / 2;
                this.dy = +opts.charSize / 2;

                this.fireworkDy = this.y - hh;

                var hue = (x / calc.totalWidth) * 360;

                this.color = "hsl(hue,80%,50%)".replace("hue", hue);
                this.lightAlphaColor = "hsla(hue,80%,light%,alp)".replace("hue", hue);
                this.lightColor = "hsl(hue,80%,light%)".replace("hue", hue);
                this.alphaColor = "hsla(hue,80%,50%,alp)".replace("hue", hue);

                this.reset();
            }
            Letter.prototype.reset = function () {
                this.phase = "firework";
                this.tick = 0;
                this.spawned = false;
                this.spawningTime = (opts.fireworkSpawnTime * Math.random()) | 0;
                this.reachTime =
                    (opts.fireworkBaseReachTime + opts.fireworkAddedReachTime * Math.random()) |
                    0;
                this.lineWidth =
                    opts.fireworkBaseLineWidth + opts.fireworkAddedLineWidth * Math.random();
                this.prevPoints = [[0, hh, 0]];
            };
            Letter.prototype.step = function () {
                if (this.phase === "firework") {
                    if (!this.spawned) {
                        ++this.tick;
                        if (this.tick >= this.spawningTime) {
                            this.tick = 0;
                            this.spawned = true;
                        }
                    } else {
                        ++this.tick;

                        var linearProportion = this.tick / this.reachTime,
                            armonicProportion = Math.sin(linearProportion * TauQuarter),
                            x = linearProportion * this.x,
                            y = hh + armonicProportion * this.fireworkDy;

                        if (this.prevPoints.length > opts.fireworkPrevPoints)
                            this.prevPoints.shift();

                        this.prevPoints.push([x, y, linearProportion * this.lineWidth]);

                        var lineWidthProportion = 1 / (this.prevPoints.length - 1);

                        for (var i = 1; i < this.prevPoints.length; ++i) {
                            var point = this.prevPoints[i],
                                point2 = this.prevPoints[i - 1];

                            ctx.strokeStyle = this.alphaColor.replace(
                                "alp",
                                i / this.prevPoints.length
                            );
                            ctx.lineWidth = point[2] * lineWidthProportion * i;
                            ctx.beginPath();
                            ctx.moveTo(point[0], point[1]);
                            ctx.lineTo(point2[0], point2[1]);
                            ctx.stroke();
                        }

                        if (this.tick >= this.reachTime) {
                            this.phase = "contemplate";

                            this.circleFinalSize =
                                opts.fireworkCircleBaseSize +
                                opts.fireworkCircleAddedSize * Math.random();
                            this.circleCompleteTime =
                                (opts.fireworkCircleBaseTime +
                                    opts.fireworkCircleAddedTime * Math.random()) |
                                0;
                            this.circleCreating = true;
                            this.circleFading = false;

                            this.circleFadeTime =
                                (opts.fireworkCircleFadeBaseTime +
                                    opts.fireworkCircleFadeAddedTime * Math.random()) |
                                0;
                            this.tick = 0;
                            this.tick2 = 0;

                            this.shards = [];

                            var shardCount =
                                (opts.fireworkBaseShards +
                                    opts.fireworkAddedShards * Math.random()) |
                                0,
                                angle = Tau / shardCount,
                                cos = Math.cos(angle),
                                sin = Math.sin(angle),
                                x = 1,
                                y = 0;

                            for (var i = 0; i < shardCount; ++i) {
                                var x1 = x;
                                x = x * cos - y * sin;
                                y = y * cos + x1 * sin;

                                this.shards.push(new Shard(this.x, this.y, x, y, this.alphaColor));
                            }
                        }
                    }
                } else if (this.phase === "contemplate") {
                    ++this.tick;

                    if (this.circleCreating) {
                        ++this.tick2;
                        var proportion = this.tick2 / this.circleCompleteTime,
                            armonic = -Math.cos(proportion * Math.PI) / 2 + 0.5;

                        ctx.beginPath();
                        ctx.fillStyle = this.lightAlphaColor
                            .replace("light", 50 + 50 * proportion)
                            .replace("alp", proportion);
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, armonic * this.circleFinalSize, 0, Tau);
                        ctx.fill();

                        if (this.tick2 > this.circleCompleteTime) {
                            this.tick2 = 0;
                            this.circleCreating = false;
                            this.circleFading = true;
                        }
                    } else if (this.circleFading) {
                        ctx.fillStyle = this.lightColor.replace("light", 70);
                        ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);

                        ++this.tick2;
                        var proportion = this.tick2 / this.circleFadeTime,
                            armonic = -Math.cos(proportion * Math.PI) / 2 + 0.5;

                        ctx.beginPath();
                        ctx.fillStyle = this.lightAlphaColor
                            .replace("light", 100)
                            .replace("alp", 1 - armonic);
                        ctx.arc(this.x, this.y, this.circleFinalSize, 0, Tau);
                        ctx.fill();

                        if (this.tick2 >= this.circleFadeTime) this.circleFading = false;
                    } else {
                        ctx.fillStyle = this.lightColor.replace("light", 70);
                        ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);
                    }

                    for (var i = 0; i < this.shards.length; ++i) {
                        this.shards[i].step();

                        if (!this.shards[i].alive) {
                            this.shards.splice(i, 1);
                            --i;
                        }
                    }

                    if (this.tick > opts.letterContemplatingWaitTime) {
                        this.phase = "balloon";

                        this.tick = 0;
                        this.spawning = true;
                        this.spawnTime = (opts.balloonSpawnTime * Math.random()) | 0;
                        this.inflating = false;
                        this.inflateTime =
                            (opts.balloonBaseInflateTime +
                                opts.balloonAddedInflateTime * Math.random()) |
                            0;
                        this.size =
                            (opts.balloonBaseSize + opts.balloonAddedSize * Math.random()) | 0;

                        var rad =
                            opts.balloonBaseRadian + opts.balloonAddedRadian * Math.random(),
                            vel = opts.balloonBaseVel + opts.balloonAddedVel * Math.random();

                        this.vx = Math.cos(rad) * vel;
                        this.vy = Math.sin(rad) * vel;
                    }
                } else if (this.phase === "balloon") {
                    ctx.strokeStyle = this.lightColor.replace("light", 80);

                    if (this.spawning) {
                        ++this.tick;
                        ctx.fillStyle = this.lightColor.replace("light", 70);
                        ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);

                        if (this.tick >= this.spawnTime) {
                            this.tick = 0;
                            this.spawning = false;
                            this.inflating = true;
                        }
                    } else if (this.inflating) {
                        ++this.tick;

                        var proportion = this.tick / this.inflateTime,
                            x = (this.cx = this.x),
                            y = (this.cy = this.y - this.size * proportion);

                        ctx.fillStyle = this.alphaColor.replace("alp", proportion);
                        ctx.beginPath();
                        generateBalloonPath(x, y, this.size * proportion);
                        ctx.fill();

                        ctx.beginPath();
                        ctx.moveTo(x, y);
                        ctx.lineTo(x, this.y);
                        ctx.stroke();

                        ctx.fillStyle = this.lightColor.replace("light", 70);
                        ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);

                        if (this.tick >= this.inflateTime) {
                            this.tick = 0;
                            this.inflating = false;
                        }
                    } else {
                        this.cx += this.vx;
                        this.cy += this.vy += opts.upFlow;

                        ctx.fillStyle = this.color;
                        ctx.beginPath();
                        generateBalloonPath(this.cx, this.cy, this.size);
                        ctx.fill();

                        ctx.beginPath();
                        ctx.moveTo(this.cx, this.cy);
                        ctx.lineTo(this.cx, this.cy + this.size);
                        ctx.stroke();

                        ctx.fillStyle = this.lightColor.replace("light", 70);
                        ctx.fillText(this.char, this.cx + this.dx, this.cy + this.dy + this.size);

                        if (this.cy + this.size < -hh || this.cx < -hw || this.cy > hw)
                            this.phase = "done";
                    }
                }
            };
            function Shard(x, y, vx, vy, color) {
                var vel =
                    opts.fireworkShardBaseVel + opts.fireworkShardAddedVel * Math.random();

                this.vx = vx * vel;
                this.vy = vy * vel;

                this.x = x;
                this.y = y;

                this.prevPoints = [[x, y]];
                this.color = color;

                this.alive = true;

                this.size =
                    opts.fireworkShardBaseSize + opts.fireworkShardAddedSize * Math.random();
            }
            Shard.prototype.step = function () {
                this.x += this.vx;
                this.y += this.vy += opts.gravity;

                if (this.prevPoints.length > opts.fireworkShardPrevPoints)
                    this.prevPoints.shift();

                this.prevPoints.push([this.x, this.y]);

                var lineWidthProportion = this.size / this.prevPoints.length;

                for (var k = 0; k < this.prevPoints.length - 1; ++k) {
                    var point = this.prevPoints[k],
                        point2 = this.prevPoints[k + 1];

                    ctx.strokeStyle = this.color.replace("alp", k / this.prevPoints.length);
                    ctx.lineWidth = k * lineWidthProportion;
                    ctx.beginPath();
                    ctx.moveTo(point[0], point[1]);
                    ctx.lineTo(point2[0], point2[1]);
                    ctx.stroke();
                }

                if (this.prevPoints[0][1] > hh) this.alive = false;
            };
            function generateBalloonPath(x, y, size) {
                ctx.moveTo(x, y);
                ctx.bezierCurveTo(
                    x - size / 2,
                    y - size / 2,
                    x - size / 4,
                    y - size,
                    x,
                    y - size
                );
                ctx.bezierCurveTo(x + size / 4, y - size, x + size / 2, y - size / 2, x, y);
            }

            function animFireworksAndBalloons() {
                animationFrameId = window.requestAnimationFrame(animFireworksAndBalloons);

                ctx.fillStyle = "rgba(0, 0, 0, 0)"; // Transparent background
                ctx.clearRect(0, 0, w, h); // Clear canvas

                ctx.translate(hw, hh);

                var done = true;
                for (var l = 0; l < letters.length; ++l) {
                    letters[l].step();
                    if (letters[l].phase !== "done") done = false;
                }

                ctx.translate(-hw, -hh);

                if (done) {
                    for (var l = 0; l < letters.length; ++l) letters[l].reset();
                }
            }

            function startFireworksAndBalloons() {
                fireworksCanvas.style.display = 'block'; // Show canvas
                initFireworksAndBalloons(); // Re-initialize to reset positions
                animFireworksAndBalloons();
                window.addEventListener("resize", resizeFireworksCanvas);
            }

            function stopFireworksAndBalloons() {
                window.cancelAnimationFrame(animationFrameId);
                fireworksCanvas.style.display = 'none'; // Hide canvas
                ctx.clearRect(0, 0, w, h); // Clear any remaining drawings
                window.removeEventListener("resize", resizeFireworksCanvas);
            }

            function resizeFireworksCanvas() {
                w = fireworksCanvas.width = window.innerWidth;
                h = fireworksCanvas.height = window.innerHeight;
                hw = w / 2;
                hh = h / 2;
                ctx.font = opts.charSize + "px Verdana";
            }

            // Initial setup for fireworks canvas (hidden by default)
            fireworksCanvas.style.display = 'none';
            window.addEventListener("resize", resizeFireworksCanvas); // Ensure canvas resizes even when hidden
        });
    </script>
</body>

</html>
